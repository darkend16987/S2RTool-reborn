<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building Render - S2R Tool</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- HEADER -->
    <header class="app-header">
        <div class="header-content">
            <h1>üè¢ Building Render - S2R Tool</h1>
            <p class="header-subtitle">Sketch to Photorealistic Render ‚Ä¢ Powered by Gemini AI</p>
        </div>
    </header>
    <!-- BACK TO HOME -->
    <div style="max-width: 1600px; margin: 0 auto; padding: 1rem 1.5rem;">
        <a href="index.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #2563eb; text-decoration: none; font-weight: 600;">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            V·ªÅ trang ch·ªß
        </a>



    <!-- ‚úÖ BUILDING MODE CONTAINER -->
    <div class="main-container">
        
        <!-- =============================================== -->
        <!-- COLUMN 1: INPUT SKETCH -->
        <!-- =============================================== -->
        <aside class="panel panel-input">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 1</span>
                <h2>Upload Sketch</h2>
            </div>
            
            <!-- Image Uploader -->
            <div id="imageUploader" class="image-uploader">
                <input type="file" id="uploadSketch" accept="image/*" style="display: none;">
                <label for="uploadSketch" id="uploadLabel" class="upload-label">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <span class="upload-text">K√©o th·∫£ ho·∫∑c nh·∫•n ƒë·ªÉ t·∫£i ·∫£nh</span>
                    <span class="upload-hint">JPG, PNG ‚Ä¢ Max 16MB</span>
                </label>
                <img id="previewImage" src="" alt="Sketch preview" class="preview-image hidden">
            </div>
            
            <!-- Analyze Button -->
            <button id="analyzeSketchButton" class="btn-primary" disabled>
                <span id="analyzeSpinner" class="spinner hidden"></span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                Ph√¢n t√≠ch Sketch (AI)
            </button>
            
            <!-- Messages -->
            <div id="analyzeError" class="message error-message hidden"></div>
            <div id="analyzeSuccess" class="message success-message hidden"></div>
            
            <!-- Info Box -->
            <div class="info-box">
                <strong>üí° Tips:</strong>
                <ul>
                    <li>Sketch r√µ r√†ng, ƒë·ªß chi ti·∫øt</li>
                    <li>T·ª∑ l·ªá chu·∫©n, g√≥c nh√¨n th·∫≥ng</li>
                    <li>C√≥ th·ªÉ l√† v·∫Ω tay ho·∫∑c CAD</li>
                </ul>
            </div>
        </aside>

        <!-- =============================================== -->
        <!-- COLUMN 2: PARAMETERS FORM -->
        <!-- =============================================== -->
        <main class="panel panel-form">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 2</span>
                <h2>Tinh ch·ªânh Th√¥ng s·ªë</h2>
            </div>
            
            <form id="renderPromptForm">
                
                <!-- Main Description -->
                <div class="form-group">
                    <label for="main_description">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
                        Lo·∫°i c√¥ng tr√¨nh (Building Type)
                    </label>
                    <textarea id="main_description" rows="2" placeholder="AI s·∫Ω ƒëi·ªÅn t·ª± ƒë·ªông sau khi ph√¢n t√≠ch..."></textarea>
                </div>
                
                <!-- ‚≠ê NEW: Facade Style Field -->
                <div class="form-group">
                    <label for="facade_style">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                            <polyline points="9 22 9 12 15 12 15 22"/>
                        </svg>
                        Phong c√°ch Ki·∫øn tr√∫c
                    </label>
                    <input type="text" id="facade_style" placeholder="V√≠ d·ª•: Modern minimalist, Neoclassical, Indochine...">
                </div>

                <!-- ‚úÖ NEW: Floor Count Field -->
                <div class="form-grid-2">
                    <div class="form-group">
                        <label for="floor_count">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"/>
                                <rect x="14" y="3" width="7" height="7"/>
                                <rect x="14" y="14" width="7" height="7"/>
                                <rect x="3" y="14" width="7" height="7"/>
                            </svg>
                            S·ªë t·∫ßng (Floor Count) <span style="color: #ef4444;">*</span>
                        </label>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <button type="button" id="floorMinus" class="btn-icon" style="width: 40px; height: 40px; font-size: 1.5rem; padding: 0;">‚àí</button>
                            <input
                                type="number"
                                id="floor_count"
                                min="1"
                                max="50"
                                value="3"
                                required
                                style="text-align: center; font-size: 1.25rem; font-weight: 600; width: 80px; padding: 0.5rem;"
                            >
                            <button type="button" id="floorPlus" class="btn-icon" style="width: 40px; height: 40px; font-size: 1.5rem; padding: 0;">+</button>
                        </div>
                        <small style="color: #64748b; font-size: 0.875rem; display: block; margin-top: 0.25rem;">S·ªë t·∫ßng ch√≠nh (kh√¥ng t√≠nh tum/l·ª≠ng)</small>
                    </div>

                    <div class="form-group">
                        <label>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 3h18v18H3z"/>
                                <path d="M9 3v18"/>
                                <path d="M3 9h18"/>
                            </svg>
                            T·∫ßng l·ª≠ng/Tum
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.75rem; cursor: pointer;">
                            <input type="checkbox" id="has_mezzanine" style="width: 20px; height: 20px; cursor: pointer;">
                            <span>C√≥ t·∫ßng l·ª≠ng/tum (Mezzanine)</span>
                        </label>
                    </div>
                </div>

                <!-- ‚úÖ NEW: Floor Details (Optional) -->
                <div class="form-group">
                    <label for="floor_details">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                        M√¥ t·∫£ chi ti·∫øt t·∫ßng (N·∫øu ph·ª©c t·∫°p - Kh√¥ng b·∫Øt bu·ªôc)
                    </label>
                    <textarea
                        id="floor_details"
                        rows="2"
                        placeholder="VD: Th√°p 1 c√≥ ƒë·∫ø 4 t·∫ßng + th√¢n 10 t·∫ßng, Th√°p 2 c√≥ 8 t·∫ßng. Ho·∫∑c: 3 t·∫ßng + 1 tum"></textarea>
                    <small style="color: #64748b; font-size: 0.875rem; display: block; margin-top: 0.25rem;">
                        D√πng cho c√¥ng tr√¨nh ph·ª©c t·∫°p nh∆∞ th√°p ƒë√¥i, ho·∫∑c c√≥ nhi·ªÅu ph√¢n ƒëo·∫°n t·∫ßng kh√°c nhau
                    </small>
                </div>

                <!-- Aspect Ratio & Viewpoint -->
                <div class="form-grid-2">
                    <div class="form-group">
                        <label for="aspect_ratio">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                            T·ª∑ l·ªá khung h√¨nh
                        </label>
                        <select id="aspect_ratio">
                            <option value="" disabled selected>ƒêang t·∫£i...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="viewpoint">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                            G√≥c nh√¨n (Camera)
                        </label>
                        <select id="viewpoint">
                            <option value="match_sketch" selected>G√≥c nh√¨n nh∆∞ sketch g·ªëc (M·∫∑c ƒë·ªãnh)</option>
                            <option value="main_facade">M·∫∑t ti·ªÅn ch√≠nh</option>
                            <option value="three_quarter">G√≥c 3/4 (45¬∞)</option>
                            <option value="aerial_angle">G√≥c cao (Bird's eye)</option>
                            <option value="low_angle">G√≥c th·∫•p (Worm's eye)</option>
                            <option value="balcony_closeup">C·∫≠n c·∫£nh ban c√¥ng</option>
                            <option value="entrance_detail">Chi ti·∫øt l·ªëi v√†o</option>
                            <option value="interior_exterior">T·ª´ trong nh√¨n ra</option>
                        </select>
                    </div>
                </div>

                <!-- Fidelity Slider -->
                <div class="form-group">
                    <label for="sketch_adherence">
                        ƒê·ªô b√°m s√°t Sketch: 
                        <span id="sketch_adherence_value" class="range-value">0.95</span>
                    </label>
                    <input type="range" id="sketch_adherence" min="0.5" max="1.0" step="0.01" value="0.95" class="range-slider">
                    <div class="range-labels">
                        <span>S√°ng t·∫°o</span>
                        <span>Ch√≠nh x√°c</span>
                    </div>
                </div>

                <!-- Collapsible Sections -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        Y·∫øu t·ªë then ch·ªët (Critical Elements)
                    </summary>
                    <div class="section-content">
                        <div id="criticalElementsContainer" class="dynamic-container"></div>
                        <button type="button" class="btn-add" data-container="criticalElementsContainer" data-type="element">
                            + Th√™m y·∫øu t·ªë
                        </button>
                    </div>
                </details>

                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        V·∫≠t li·ªáu chi ti·∫øt
                    </summary>
                    <div class="section-content">
                        <div id="materialsPreciseContainer" class="dynamic-container"></div>
                        <button type="button" class="btn-add" data-container="materialsPreciseContainer" data-type="material">
                            + Th√™m v·∫≠t li·ªáu
                        </button>
                    </div>
                </details>

                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        M√¥i tr∆∞·ªùng & B·ªëi c·∫£nh
                    </summary>
                    <div class="section-content">
                        <!-- Location / Space -->
                        <div class="form-group">
                            <label for="env_location">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                Kh√¥ng gian (Location)
                            </label>
                            <select id="env_location">
                                <option value="">-- Ch·ªçn ho·∫∑c t·ª± ƒëi·ªÅn --</option>
                                <option value="N·∫±m trong khu ƒë√¥ th·ªã hi·ªán ƒë·∫°i">Khu ƒë√¥ th·ªã hi·ªán ƒë·∫°i</option>
                                <option value="N·∫±m trong th√†nh ph·ªë H√† N·ªôi">Th√†nh ph·ªë H√† N·ªôi</option>
                                <option value="N·∫±m trong th√†nh ph·ªë H·ªì Ch√≠ Minh">TP H·ªì Ch√≠ Minh</option>
                                <option value="N·∫±m t·∫°i ng√£ 4 th√†nh ph·ªë ƒë√¥ng ƒë√∫c">Ng√£ 4 ƒë√¥ng ƒë√∫c</option>
                                <option value="Khu v·ª±c ven s√¥ng, view m·ªü">Ven s√¥ng, view m·ªü</option>
                                <option value="Khu d√¢n c∆∞ y√™n tƒ©nh">Khu d√¢n c∆∞ y√™n tƒ©nh</option>
                                <option value="Trung t√¢m th∆∞∆°ng m·∫°i">Trung t√¢m th∆∞∆°ng m·∫°i</option>
                                <option value="custom">‚úèÔ∏è T·ª± ƒëi·ªÅn...</option>
                            </select>
                            <input type="text" id="env_location_custom" class="hidden" placeholder="M√¥ t·∫£ kh√¥ng gian t√πy ch·ªânh..." style="margin-top: 0.5rem;">
                        </div>

                        <!-- Time of Day -->
                        <div class="form-group">
                            <label for="env_time">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <polyline points="12 6 12 12 16 14"/>
                                </svg>
                                Th·ªùi ƒëi·ªÉm (Time of Day)
                            </label>
                            <select id="env_time">
                                <option value="">-- Ch·ªçn ho·∫∑c t·ª± ƒëi·ªÅn --</option>
                                <option value="Bu·ªïi s√°ng s·ªõm, √°nh s√°ng d·ªãu">Bu·ªïi s√°ng s·ªõm</option>
                                <option value="Gi·ªù v√†ng (Golden hour), √°nh n·∫Øng ·∫•m" selected>Gi·ªù v√†ng (Golden hour)</option>
                                <option value="Bu·ªïi tr∆∞a, n·∫Øng g·∫Øt">Bu·ªïi tr∆∞a</option>
                                <option value="Chi·ªÅu t√†, √°nh n·∫Øng nghi√™ng">Chi·ªÅu t√†</option>
                                <option value="Bu·ªïi t·ªëi, ƒë√®n ƒë∆∞·ªùng b·∫≠t s√°ng">Bu·ªïi t·ªëi</option>
                                <option value="Ban ƒë√™m, √°nh ƒë√®n lung linh">Ban ƒë√™m</option>
                                <option value="custom">‚úèÔ∏è T·ª± ƒëi·ªÅn...</option>
                            </select>
                            <input type="text" id="env_time_custom" class="hidden" placeholder="M√¥ t·∫£ th·ªùi ƒëi·ªÉm t√πy ch·ªânh..." style="margin-top: 0.5rem;">
                        </div>

                        <!-- Weather -->
                        <div class="form-group">
                            <label for="env_weather">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/>
                                </svg>
                                Th·ªùi ti·∫øt (Weather)
                            </label>
                            <select id="env_weather">
                                <option value="">-- Ch·ªçn ho·∫∑c t·ª± ƒëi·ªÅn --</option>
                                <option value="Tr·ªùi quang, n·∫Øng ƒë·∫πp" selected>Tr·ªùi quang, n·∫Øng ƒë·∫πp</option>
                                <option value="Nhi·ªÅu m√¢y, √°nh s√°ng d·ªãu">Nhi·ªÅu m√¢y</option>
                                <option value="M∆∞a nh·∫π, b·∫ßu tr·ªùi u √°m">M∆∞a nh·∫π</option>
                                <option value="S∆∞∆°ng m√π nh·∫π bu·ªïi s√°ng">S∆∞∆°ng m√π nh·∫π</option>
                                <option value="Gi√≥ nh·∫π, c√¢y c·ªëi ƒëung ƒë∆∞a">Gi√≥ nh·∫π</option>
                                <option value="custom">‚úèÔ∏è T·ª± ƒëi·ªÅn...</option>
                            </select>
                            <input type="text" id="env_weather_custom" class="hidden" placeholder="M√¥ t·∫£ th·ªùi ti·∫øt t√πy ch·ªânh..." style="margin-top: 0.5rem;">
                        </div>

                        <!-- Vehicles -->
                        <div class="form-group">
                            <label for="env_vehicles">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="1" y="3" width="15" height="13"/>
                                    <circle cx="5.5" cy="17.5" r="2.5"/>
                                    <circle cx="11.5" cy="17.5" r="2.5"/>
                                </svg>
                                Xe c·ªô (Vehicles)
                            </label>
                            <select id="env_vehicles">
                                <option value="">Kh√¥ng c√≥ xe c·ªô</option>
                                <option value="Xe √¥ t√¥ v√† xe m√°y ƒëi l·∫°i tr√™n ƒë∆∞·ªùng" selected>√î t√¥ + Xe m√°y</option>
                                <option value="Xe √¥ t√¥ v√† xe ƒë·∫°p ƒëi l·∫°i">√î t√¥ + Xe ƒë·∫°p</option>
                                <option value="Xe bu√Ωt v√† xe m√°y">Xe bu√Ωt + Xe m√°y</option>
                                <option value="Ch·ªâ c√≥ xe ƒë·∫°p">Ch·ªâ xe ƒë·∫°p</option>
                                <option value="Xe ƒë·∫≠u hai b√™n ƒë∆∞·ªùng">Xe ƒë·∫≠u hai b√™n ƒë∆∞·ªùng</option>
                                <option value="custom">‚úèÔ∏è T·ª± ƒëi·ªÅn...</option>
                            </select>
                            <input type="text" id="env_vehicles_custom" class="hidden" placeholder="M√¥ t·∫£ xe c·ªô t√πy ch·ªânh..." style="margin-top: 0.5rem;">
                        </div>

                        <!-- People -->
                        <div class="form-group">
                            <label for="env_people">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                    <circle cx="9" cy="7" r="4"/>
                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                                </svg>
                                Ng∆∞·ªùi (People)
                            </label>
                            <select id="env_people">
                                <option value="">Kh√¥ng c√≥ ng∆∞·ªùi</option>
                                <option value="ƒê√¥ng ng∆∞·ªùi ƒëi l·∫°i, ra v√†o t√≤a nh√†">ƒê√¥ng ng∆∞·ªùi ra v√†o</option>
                                <option value="Nh√≥m nh·ªè ng∆∞·ªùi ƒëi l·∫°i tr√™n ƒë∆∞·ªùng" selected>Nh√≥m nh·ªè ƒëi l·∫°i</option>
                                <option value="ƒê√¥ng ng∆∞·ªùi, nh√≥m u·ªëng c√† ph√™ tr√™n v·ªâa h√®">ƒê√¥ng ng∆∞·ªùi + Cafe v·ªâa h√®</option>
                                <option value="Ng∆∞·ªùi t·∫£n b·ªô c√¥ng vi√™n">Ng∆∞·ªùi t·∫£n b·ªô</option>
                                <option value="Ng∆∞·ªùi ng·ªìi gh·∫ø ƒë√°">Ng∆∞·ªùi ng·ªìi th∆∞ gi√£n</option>
                                <option value="custom">‚úèÔ∏è T·ª± ƒëi·ªÅn...</option>
                            </select>
                            <input type="text" id="env_people_custom" class="hidden" placeholder="M√¥ t·∫£ ng∆∞·ªùi t√πy ch·ªânh..." style="margin-top: 0.5rem;">
                        </div>

                        <!-- Additional Context (Optional) -->
                        <div class="form-group">
                            <label for="env_additional">
                                B·ªëi c·∫£nh b·ªï sung (T√πy ch·ªçn)
                            </label>
                            <textarea id="env_additional" rows="2" placeholder="VD: C√¢y xanh hai b√™n ƒë∆∞·ªùng, v∆∞·ªùn hoa tr∆∞·ªõc nh√†, h√†ng r√†o s·∫Øt..."></textarea>
                        </div>
                    </div>
                </details>
                
                <!-- ‚≠ê NEW: Inpainting Section -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 20h9"/>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                        </svg>
                        üé® Ch·ªânh s·ª≠a v√πng c·ª• th·ªÉ (Inpainting)
                    </summary>
                    <div class="section-content">
                        <!-- Instructions -->
                        <div class="info-box" style="margin-bottom: 1rem; background: #fef3c7; border-color: #f59e0b;">
                            <strong>üìù H∆∞·ªõng d·∫´n t·∫°o Mask:</strong>
                            <ol style="margin-top: 0.5rem; padding-left: 1.2rem; font-size: 0.875rem;">
                                <li>M·ªü ·∫£nh render trong Photoshop/GIMP/Paint.NET</li>
                                <li>T·∫°o layer m·ªõi, fill ƒëen (RGB: 0,0,0)</li>
                                <li>V·∫Ω TR·∫ÆNG (RGB: 255,255,255) v√†o v√πng c·∫ßn s·ª≠a</li>
                                <li>Xu·∫•t ·∫£nh mask d·∫°ng PNG/JPG</li>
                            </ol>
                            <p style="color: #d97706; margin-top: 0.5rem; font-weight: 600;">
                                ‚ö†Ô∏è Quy t·∫Øc: <strong>Tr·∫Øng = S·ª≠a | ƒêen = Gi·ªØ nguy√™n</strong>
                            </p>
                        </div>
                        
                        <!-- Upload Mask -->
                        <div class="form-group">
                            <label for="uploadMask">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                                    <circle cx="8.5" cy="8.5" r="1.5"/>
                                    <path d="M20.4 14.5L16 10 4 20"/>
                                </svg>
                                Upload Mask Image
                            </label>
                            <input type="file" id="uploadMask" accept="image/*">
                            <div id="maskPreview" class="hidden" style="margin-top: 0.5rem;">
                                <img id="maskPreviewImage" src="" alt="Mask preview" style="max-width: 200px; border: 2px solid #e2e8f0; border-radius: 8px;">
                            </div>
                        </div>
                        
                        <!-- Edit Instruction -->
                        <div class="form-group">
                            <label for="inpaintInstruction">
                                M√¥ t·∫£ thay ƒë·ªïi (Edit Instruction)
                            </label>
                            <textarea id="inpaintInstruction" rows="3" placeholder="V√≠ d·ª•: Add hanging plants on balcony railings, Add national flag on rooftop"></textarea>
                        </div>
                        
                        <!-- Apply Button -->
                        <button type="button" id="applyInpaintBtn" class="btn-primary" disabled style="width: 100%;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 20h9"/>
                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                            </svg>
                            √Åp d·ª•ng Inpainting
                        </button>
                    </div>
                </details>
                
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        T·ª´ kh√≥a Phong c√°ch
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <input type="text" id="style_keywords" placeholder="professional architectural photography, 8K UHD..." value="professional architectural photography, hyper-realistic rendering, 8K UHD, cinematic color grading">
                        </div>
                    </div>
                </details>

                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        Th√¥ng s·ªë K·ªπ thu·∫≠t
                    </summary>
                    <div class="section-content">
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label for="tech_camera">M√°y ·∫£nh:</label>
                                <input type="text" id="tech_camera" value="Canon EOS 5D Mark IV">
                            </div>
                            <div class="form-group">
                                <label for="tech_lens">·ªêng k√≠nh:</label>
                                <input type="text" id="tech_lens" value="24mm wide-angle">
                            </div>
                            <div class="form-group">
                                <label for="tech_lighting">√Ånh s√°ng:</label>
                                <input type="text" id="tech_lighting" value="natural sunlight, golden hour">
                            </div>
                        </div>
                    </div>
                </details>

                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        Negative Prompt
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <textarea id="negative_prompt" rows="3">sketch, drawing, illustration, cartoon, anime, blurry, low resolution, distorted proportions, unrealistic lighting</textarea>
                        </div>
                    </div>
                </details>
            </form>
        </main>

        <!-- =============================================== -->
        <!-- COLUMN 3: OUTPUT & ACTIONS -->
        <!-- =============================================== -->
        <aside class="panel panel-output">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 3</span>
                <h2>K·∫øt qu·∫£ Render</h2>
            </div>
            
            <!-- Action Buttons -->
            <div class="output-actions">
                <!-- Export JSON button will be inserted here by JS -->
                
                <button id="generateRenderButton" class="btn-submit" disabled>
                    <span id="renderSpinner" class="spinner hidden"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    T·∫°o Render
                </button>
            </div>
            
            <!-- Messages -->
            <div id="renderError" class="message error-message hidden"></div>
            <div id="renderSuccess" class="message success-message hidden"></div>
            
            <!-- Gallery -->
            <div id="gallery" class="gallery">
                <div class="gallery-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <polyline points="21 15 16 10 5 21"/>
                    </svg>
                    <p>K·∫øt qu·∫£ render s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y</p>
                </div>
            </div>
            
            <!-- Output Controls -->
            <div id="outputControls" class="output-controls hidden">
                <button id="downloadImageBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    T·∫£i v·ªÅ
                </button>
                <button id="regenerateBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="1 4 1 10 7 10"/>
                        <polyline points="23 20 23 14 17 14"/>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                    </svg>
                    T·∫°o l·∫°i
                </button>
            </div>
            
            <!-- Stats Box -->
            <div id="statsBox" class="stats-box hidden">
                <div class="stat-item">
                    <span class="stat-label">Th·ªùi gian:</span>
                    <span class="stat-value" id="statTime">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">K√≠ch th∆∞·ªõc:</span>
                </div>
            </div>
        </aside>



    </div>
    <!-- END MAIN CONTAINER -->

    <!-- FOOTER -->
    <footer class="app-footer">
        <p>Made by <strong>Nam Ta</strong> + <strong>Gemini AI</strong></p>
        <p>¬©2025 ‚Ä¢ Architecture S2R Tool ‚Ä¢ All rights reserved</p>
    </footer>

    <!-- JavaScript -->
    <script src="building-script.js?v=1762859322"></script>
</body>
</html>