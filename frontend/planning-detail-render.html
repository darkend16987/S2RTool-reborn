<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning Detail Render - S2R Tool</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <!-- HEADER -->
    <header class="app-header">
        <div class="header-content">
            <h1>üåÜ Planning Detail Render - S2R Tool</h1>
            <p class="header-subtitle">Sketch to Photorealistic Planning Visualization ‚Ä¢ Powered by Gemini AI</p>
        </div>
    </header>

    <!-- BACK TO HOME -->
    <div style="max-width: 1600px; margin: 0 auto; padding: 1rem 1.5rem;">
        <a href="index.html"
            style="display: inline-flex; align-items: center; gap: 0.5rem; color: #2563eb; text-decoration: none; font-weight: 600;">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            V·ªÅ trang ch·ªß
        </a>
    </div>

    <!-- PLANNING DETAIL MODE CONTAINER -->
    <div class="main-container">

        <!-- =============================================== -->
        <!-- COLUMN 1: INPUT SKETCH -->
        <!-- =============================================== -->
        <aside class="panel panel-input">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 1</span>
                <h2>Upload Planning Sketch</h2>
            </div>

            <!-- Image Uploader -->
            <div id="imageUploader" class="image-uploader">
                <input type="file" id="uploadSketch" accept="image/*" style="display: none;">
                <label for="uploadSketch" id="uploadLabel" class="upload-label">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="17 8 12 3 7 8" />
                        <line x1="12" y1="3" x2="12" y2="15" />
                    </svg>
                    <span class="upload-text">K√©o th·∫£ ho·∫∑c nh·∫•n ƒë·ªÉ t·∫£i ·∫£nh</span>
                    <span class="upload-hint">JPG, PNG ‚Ä¢ Max 16MB</span>
                </label>
                <img id="previewImage" src="" alt="Sketch preview" class="preview-image hidden">
            </div>

            <!-- Info Box -->
            <div class="info-box">
                <strong>üí° Planning Detail Mode:</strong>
                <ul>
                    <li>Sketch quy ho·∫°ch c√≥ S·∫¥N c√¥ng tr√¨nh</li>
                    <li>Nhi·ªÅu t√≤a nh√†/c√¥ng tr√¨nh trong 1 khu</li>
                    <li>Focus: H√¨nh th√°i, t·ª∑ l·ªá, layout</li>
                    <li>G√≥c nh√¨n: Birdview/Drone preferred</li>
                </ul>
            </div>
        </aside>

        <!-- =============================================== -->
        <!-- COLUMN 2: PARAMETERS FORM -->
        <!-- =============================================== -->
        <main class="panel panel-form">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 2</span>
                <h2>Th√¥ng s·ªë Render</h2>
            </div>

            <!-- Analyze Button -->
            <div class="output-actions" style="margin-bottom: 1.5rem;">
                <button type="button" id="analyzeSketchButton" class="btn-secondary" style="width: 100%;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8" />
                        <path d="m21 21-4.35-4.35" />
                    </svg>
                    <span id="analyzeButtonText">Ph√¢n t√≠ch Sketch (Analyze)</span>
                    <span id="analyzeSpinner" class="spinner hidden"></span>
                </button>
                <small
                    style="color: #64748b; font-size: 0.875rem; display: block; margin-top: 0.5rem; text-align: center;">
                    üí° Gemini s·∫Ω t·ª± ƒë·ªông ƒë·ªçc sketch v√† ƒëi·ªÅn th√¥ng tin v√†o form b√™n d∆∞·ªõi
                </small>
            </div>

            <form id="planningDetailForm">

                <!-- Basic Info Section -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                        Th√¥ng tin c∆° b·∫£n (Basic Info)
                    </summary>
                    <div class="section-content">
                        <!-- Scale -->
                        <div class="form-group">
                            <label for="scale">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" />
                                    <path d="M3 9h18" />
                                    <path d="M9 21V9" />
                                </svg>
                                T·ª∑ l·ªá sketch (Scale)
                            </label>
                            <select id="scale">
                                <option value="1:500" selected>1:500 - Quy ho·∫°ch t·ªïng th·ªÉ</option>
                                <option value="1:200">1:200 - Quy ho·∫°ch chi ti·∫øt</option>
                                <option value="1:150">1:150 - Chi ti·∫øt v·ª´a</option>
                                <option value="1:100">1:100 - Chi ti·∫øt cao</option>
                            </select>
                        </div>

                        <!-- Project Type -->
                        <div class="form-group">
                            <label for="project_type">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                                </svg>
                                Lo·∫°i c√¥ng tr√¨nh
                            </label>
                            <select id="project_type">
                                <option value="mixed_use" selected>Khu ƒë√¥ th·ªã h·ªón h·ª£p</option>
                                <option value="residential">Khu d√¢n c∆∞</option>
                                <option value="industrial">Khu c√¥ng nghi·ªáp</option>
                                <option value="resort">Khu du l·ªãch ngh·ªâ d∆∞·ª°ng</option>
                                <option value="campus">Campus (ƒêH, b·ªánh vi·ªán)</option>
                                <option value="commercial">Khu th∆∞∆°ng m·∫°i</option>
                            </select>
                        </div>

                        <!-- Overall Description -->
                        <div class="form-group">
                            <label for="overall_description">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 20h9" />
                                    <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" />
                                </svg>
                                T·ªïng quan d·ª± √°n
                            </label>
                            <textarea id="overall_description" rows="2"
                                placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn t·ªïng th·ªÉ... (s·∫Ω t·ª± ƒë·ªông ƒëi·ªÅn khi Analyze)"></textarea>
                        </div>
                    </div>
                </details>

                <!-- High-rise Zone Section -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                        Ph√¢n khu cao t·∫ßng (High-rise Zone)
                    </summary>
                    <div class="section-content">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div class="form-group">
                                <label for="highrise_count">S·ªë l∆∞·ª£ng t√≤a</label>
                                <input type="text" id="highrise_count" placeholder="VD: 30-31">
                            </div>
                            <div class="form-group">
                                <label for="highrise_floors">S·ªë t·∫ßng</label>
                                <input type="text" id="highrise_floors" placeholder="VD: 38-40">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="highrise_style">Phong c√°ch</label>
                            <select id="highrise_style">
                                <option value="modern" selected>Hi·ªán ƒë·∫°i (Modern)</option>
                                <option value="neoclassical">T√¢n c·ªï ƒëi·ªÉn</option>
                                <option value="minimalist">T·ªëi gi·∫£n</option>
                                <option value="industrial">C√¥ng nghi·ªáp</option>
                                <option value="tropical_modern">Hi·ªán ƒë·∫°i nhi·ªát ƒë·ªõi</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="highrise_colors">M√†u s·∫Øc ch·ªß ƒë·∫°o</label>
                            <input type="text" id="highrise_colors" placeholder="VD: V√†ng, tr·∫Øng, k√≠nh">
                        </div>
                        <div class="form-group">
                            <label for="highrise_features">ƒê·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t</label>
                            <textarea id="highrise_features" rows="2"
                                placeholder="VD: Lam ch·∫Øn n·∫Øng, ban c√¥ng, rooftop VRV..."></textarea>
                        </div>
                    </div>
                </details>

                <!-- Low-rise Zone Section -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                        Ph√¢n khu th·∫•p t·∫ßng (Low-rise Zone)
                    </summary>
                    <div class="section-content">
                        <label
                            style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; cursor: pointer;">
                            <input type="checkbox" id="has_lowrise" style="width: 18px; height: 18px;">
                            <span>C√≥ ph√¢n khu th·∫•p t·∫ßng</span>
                        </label>
                        <div id="lowrise_fields" class="hidden">
                            <div class="form-group">
                                <label for="lowrise_floors">S·ªë t·∫ßng</label>
                                <input type="text" id="lowrise_floors" placeholder="VD: 3-4">
                            </div>
                            <div class="form-group">
                                <label for="lowrise_style">Phong c√°ch</label>
                                <select id="lowrise_style">
                                    <option value="neoclassical">T√¢n c·ªï ƒëi·ªÉn</option>
                                    <option value="modern">Hi·ªán ƒë·∫°i</option>
                                    <option value="villa">Bi·ªát th·ª±</option>
                                    <option value="townhouse">Nh√† ph·ªë li·ªÅn k·ªÅ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lowrise_colors">M√†u s·∫Øc</label>
                                <input type="text" id="lowrise_colors" placeholder="VD: M√°i x√°m, t∆∞·ªùng tr·∫Øng">
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Landscape Section -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                        C·∫£nh quan & Kh√¥ng gian c√¥ng c·ªông
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="green_spaces">Kh√¥ng gian xanh & Ti·ªán √≠ch</label>
                            <textarea id="green_spaces" rows="2"
                                placeholder="VD: C√¥ng vi√™n, s√¢n ch∆°i, BBQ, tr∆∞·ªùng h·ªçc..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="tree_type">Lo·∫°i c√¢y xanh</label>
                            <select id="tree_type">
                                <option value="diverse" selected>ƒêa d·∫°ng lo√†i</option>
                                <option value="tropical">Nhi·ªát ƒë·ªõi</option>
                                <option value="temperate">√în ƒë·ªõi</option>
                                <option value="minimalist">Xanh t·ªëi gi·∫£n</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="road_pattern">M·∫´u giao th√¥ng</label>
                            <select id="road_pattern">
                                <option value="grid" selected>Grid (√î b√†n c·ªù)</option>
                                <option value="organic">Organic (T·ª± nhi√™n)</option>
                                <option value="radial">Radial (T·ªèa tr√≤n)</option>
                                <option value="mixed">Mixed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label style="display: block; margin-bottom: 0.5rem;">Context & Activities</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="context_people" checked
                                        style="width: 18px; height: 18px;">
                                    <span>Ng∆∞·ªùi ƒëi b·ªô</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="context_vehicles" checked
                                        style="width: 18px; height: 18px;">
                                    <span>Xe h∆°i</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="context_skyline" checked
                                        style="width: 18px; height: 18px;">
                                    <span>City skyline xa</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="context_water" style="width: 18px; height: 18px;">
                                    <span>Water features</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Custom Override -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                        M√¥ t·∫£ t√πy ch·ªânh (Custom Override)
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="custom_description">
                                M√¥ t·∫£ t·ª± do (ghi ƒë√® c√°c tr∆∞·ªùng tr√™n)
                            </label>
                            <textarea id="custom_description" rows="4"
                                placeholder="D√πng khi mu·ªën ki·ªÉm so√°t ho√†n to√†n..."></textarea>
                            <small style="color: #f59e0b; font-size: 0.875rem; display: block; margin-top: 0.25rem;">
                                ‚ö†Ô∏è N·∫øu ƒëi·ªÅn, h·ªá th·ªëng s·∫Ω ∆∞u ti√™n d√πng m√¥ t·∫£ n√†y thay v√¨ build t·ª´ structured fields
                            </small>
                        </div>
                    </div>
                </details>

                <!-- Camera Angle -->
                <div class="form-group">
                    <label for="camera_angle">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                            <circle cx="12" cy="12" r="3" />
                        </svg>
                        G√≥c nh√¨n (Camera Angle)
                    </label>
                    <select id="camera_angle">
                        <option value="match_sketch" selected>Gi·ªëng g√≥c sketch (M·∫∑c ƒë·ªãnh) - B·∫£o to√†n g√≥c nh√¨n g·ªëc
                        </option>
                        <option value="drone_45deg">Drone 45¬∞ - Nh√¨n ch√©o t·ª´ tr√™n</option>
                        <option value="birds_eye">Bird's Eye (90¬∞) - Nh√¨n th·∫≥ng t·ª´ tr√™n</option>
                        <option value="drone_30deg">Drone th·∫•p 30¬∞ - G·∫ßn m·∫∑t ƒë·∫•t h∆°n</option>
                        <option value="eye_level">T·∫ßm m·∫Øt ng∆∞·ªùi - Street level</option>
                    </select>
                    <small style="color: #64748b; font-size: 0.875rem; display: block; margin-top: 0.25rem;">
                        üí° "Gi·ªëng g√≥c sketch" gi√∫p b·∫£o to√†n g√≥c nh√¨n ban ƒë·∫ßu, tr√°nh thay ƒë·ªïi perspective
                    </small>
                </div>

                <!-- Aspect Ratio -->
                <div class="form-group">
                    <label for="aspect_ratio">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" />
                        </svg>
                        T·ª∑ l·ªá khung h√¨nh
                    </label>
                    <select id="aspect_ratio">
                        <option value="16:9" selected>Landscape (2048√ó1152) - Khuy√™n d√πng</option>
                        <option value="4:3">Standard (2048√ó1536)</option>
                        <option value="1:1">Square (2048√ó2048) - Master Plan</option>
                    </select>
                </div>

                <!-- Environment Settings -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                        M√¥i tr∆∞·ªùng & √Ånh s√°ng
                    </summary>
                    <div class="section-content">
                        <!-- Time of Day -->
                        <div class="form-group">
                            <label for="time_of_day">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10" />
                                    <polyline points="12 6 12 12 16 14" />
                                </svg>
                                Th·ªùi ƒëi·ªÉm (Time of Day)
                            </label>
                            <select id="time_of_day">
                                <option value="golden_hour" selected>Gi·ªù v√†ng (Golden hour) - Khuy√™n d√πng</option>
                                <option value="morning">Bu·ªïi s√°ng s·ªõm</option>
                                <option value="midday">Bu·ªïi tr∆∞a - N·∫Øng g·∫Øt</option>
                                <option value="afternoon">Chi·ªÅu t√†</option>
                                <option value="evening">Bu·ªïi t·ªëi - ƒê√®n b·∫≠t</option>
                                <option value="night">Ban ƒë√™m</option>
                            </select>
                        </div>

                        <!-- Weather -->
                        <div class="form-group">
                            <label for="weather">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z" />
                                </svg>
                                Th·ªùi ti·∫øt (Weather)
                            </label>
                            <select id="weather">
                                <option value="clear" selected>Tr·ªùi quang, n·∫Øng ƒë·∫πp</option>
                                <option value="cloudy">Nhi·ªÅu m√¢y</option>
                                <option value="light_rain">M∆∞a nh·∫π</option>
                                <option value="foggy">S∆∞∆°ng m√π nh·∫π</option>
                            </select>
                        </div>

                        <!-- Horizon Line (NEW ADDITION) -->
                        <div class="form-group">
                            <label for="horizon_line">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="3" y1="12" x2="21" y2="12" />
                                    <path d="M3 17l3-3 3 3 4-4 4 4 4-4" />
                                </svg>
                                ƒê∆∞·ªùng ch√¢n tr·ªùi (Horizon Line)
                            </label>
                            <select id="horizon_line">
                                <option value="ground_only" selected>Ch·ªâ b·ªëi c·∫£nh m·∫∑t ƒë·∫•t (No horizon, ground context
                                    only)</option>
                                <option value="with_horizon">C√≥ ƒë∆∞·ªùng ch√¢n tr·ªùi (With horizon line)</option>
                            </select>
                            <p class="help-text" style="font-size: 0.75rem; color: #64748b; margin-top: 0.25rem;">
                                Ch·ªçn "Ch·ªâ b·ªëi c·∫£nh m·∫∑t ƒë·∫•t" n·∫øu g√≥c nh√¨n ch·ª•p t·ª´ tr√™n cao xu·ªëng, ch·ªâ th·∫•y c√¥ng tr√¨nh v√†
                                m·∫∑t ƒë·∫•t.
                                Ch·ªçn "C√≥ ƒë∆∞·ªùng ch√¢n tr·ªùi" n·∫øu g√≥c nh√¨n ch·ª•p t·ª´ xa, c√≥ th·ªÉ th·∫•y tr·ªùi v√† ƒë∆∞·ªùng ch√¢n tr·ªùi.
                            </p>
                        </div>
                    </div>
                </details>

                <!-- Quality Level Selector -->
                <div class="form-group">
                    <label for="quality_level">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <polygon points="12 2 2 7 12 12 22 7 12 2" />
                            <polyline points="2 17 12 22 22 17" />
                            <polyline points="2 12 12 17 22 12" />
                        </svg>
                        M·ª©c ƒë·ªô ch·∫•t l∆∞·ª£ng (Quality Level)
                    </label>
                    <select id="quality_level">
                        <option value="standard">Standard - Nhanh (Basic materials, fewer effects)</option>
                        <option value="high_fidelity" selected>High Fidelity - C√¢n b·∫±ng (Most features enabled)</option>
                        <option value="ultra_realism">Ultra Realism - Ch·∫≠m (All effects, maximum detail)</option>
                    </select>
                    <small style="color: #64748b; font-size: 0.875rem; display: block; margin-top: 0.25rem;">
                        üí° Quality Level t·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh c√°c preset b√™n d∆∞·ªõi
                    </small>
                </div>

                <!-- Render Quality Presets -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6" />
                        </svg>
                        Ch·∫•t l∆∞·ª£ng Render (Quality Presets)
                    </summary>
                    <div class="section-content">
                        <small style="color: #64748b; font-size: 0.875rem; display: block; margin-bottom: 0.75rem;">
                            C√°c preset n√†y ƒë∆∞·ª£c t·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh theo Quality Level, nh∆∞ng b·∫°n c√≥ th·ªÉ t√πy ch·ªânh th√™m.
                        </small>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_gi" checked style="width: 18px; height: 18px;">
                                <span>Global Illumination</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_shadows" checked style="width: 18px; height: 18px;">
                                <span>Soft Shadows</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_hdri" checked style="width: 18px; height: 18px;">
                                <span>HDRI Sky</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_reflection" checked
                                    style="width: 18px; height: 18px;">
                                <span>Reflections (Glass/Water)</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_dof" checked style="width: 18px; height: 18px;">
                                <span>Depth of Field</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_bloom" checked style="width: 18px; height: 18px;">
                                <span>Bloom / Lens Flare</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_color_correction" checked
                                    style="width: 18px; height: 18px;">
                                <span>Color Correction</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                <input type="checkbox" id="quality_desaturate" checked
                                    style="width: 18px; height: 18px;">
                                <span>-5% Saturation (Realism)</span>
                            </label>
                        </div>
                    </div>
                </details>

                <!-- Fidelity Slider -->
                <div class="form-group">
                    <label for="sketch_adherence">
                        ƒê·ªô b√°m s√°t Sketch:
                        <span id="sketch_adherence_value" class="range-value">0.90</span>
                    </label>
                    <input type="range" id="sketch_adherence" min="0.5" max="1.0" step="0.01" value="0.90"
                        class="range-slider">
                    <div class="range-labels">
                        <span>Linh ho·∫°t</span>
                        <span>Ch√≠nh x√°c tuy·ªát ƒë·ªëi</span>
                    </div>
                    <small style="color: #64748b; font-size: 0.875rem; display: block; margin-top: 0.25rem;">
                        Planning mode: Khuy√™n d√πng 0.85-0.90 ƒë·ªÉ c√¢n b·∫±ng gi·ªØa h√¨nh th√°i v√† ch·∫•t l∆∞·ª£ng ·∫£nh
                    </small>
                </div>

            </form>
        </main>

        <!-- =============================================== -->
        <!-- COLUMN 3: OUTPUT & ACTIONS -->
        <!-- =============================================== -->
        <aside class="panel panel-output">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 3</span>
                <h2>K·∫øt qu·∫£ Render</h2>
            </div>

            <!-- Action Buttons -->
            <div class="output-actions">
                <button id="generateRenderButton" class="btn-submit">
                    <span id="renderSpinner" class="spinner hidden"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3" />
                    </svg>
                    T·∫°o Render
                </button>
            </div>

            <!-- Messages -->
            <div id="renderError" class="message error-message hidden"></div>
            <div id="renderSuccess" class="message success-message hidden"></div>

            <!-- Gallery -->
            <div id="gallery" class="gallery">
                <div class="gallery-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                        <circle cx="8.5" cy="8.5" r="1.5" />
                        <polyline points="21 15 16 10 5 21" />
                    </svg>
                    <p>K·∫øt qu·∫£ render s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y</p>
                </div>
            </div>

            <!-- Output Controls -->
            <div id="outputControls" class="output-controls hidden">
                <button id="downloadImageBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7 10 12 15 17 10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    T·∫£i v·ªÅ
                </button>
                <button id="regenerateBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <polyline points="1 4 1 10 7 10" />
                        <polyline points="23 20 23 14 17 14" />
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" />
                    </svg>
                    T·∫°o l·∫°i
                </button>
            </div>

            <!-- Stats Box -->
            <div id="statsBox" class="stats-box hidden">
                <div class="stat-item">
                    <span class="stat-label">Th·ªùi gian:</span>
                    <span class="stat-value" id="statTime">-</span>
                </div>
            </div>
        </aside>

    </div>
    <!-- END MAIN CONTAINER -->

    <!-- FOOTER -->
    <footer class="app-footer">
        <p>Made by <strong>Nam Ta</strong> + <strong>Gemini AI</strong></p>
        <p>¬©2025 ‚Ä¢ Architecture S2R Tool ‚Ä¢ All rights reserved</p>
    </footer>

    <!-- JavaScript -->
    <script src="planning-detail-script.js"></script>
</body>

</html>