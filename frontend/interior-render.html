<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interior Render - S2R Tool</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- HEADER -->
    <header class="app-header">
        <div class="header-content">
            <h1>üõãÔ∏è Interior Render - S2R Tool</h1>
            <p class="header-subtitle">Interior Sketch to Photorealistic Render ‚Ä¢ Powered by Gemini AI</p>
        </div>
    </header>

    <!-- BACK TO HOME -->
    <div style="max-width: 1600px; margin: 0 auto; padding: 1rem 1.5rem;">
        <a href="index.html" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #2563eb; text-decoration: none; font-weight: 600;">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            V·ªÅ trang ch·ªß
        </a>
    </div>

    <!-- INTERIOR MODE CONTAINER -->
    <div class="main-container">

        <!-- =============================================== -->
        <!-- COLUMN 1: INPUT SKETCH -->
        <!-- =============================================== -->
        <aside class="panel panel-input">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 1</span>
                <h2>Upload Sketch N·ªôi Th·∫•t</h2>
            </div>

            <!-- Image Uploader -->
            <div id="imageUploader" class="image-uploader">
                <input type="file" id="uploadSketch" accept="image/*" style="display: none;">
                <label for="uploadSketch" id="uploadLabel" class="upload-label">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    <span class="upload-text">K√©o th·∫£ ho·∫∑c nh·∫•n ƒë·ªÉ t·∫£i ·∫£nh</span>
                    <span class="upload-hint">JPG, PNG ‚Ä¢ Max 16MB</span>
                </label>
                <img id="previewImage" src="" alt="Sketch preview" class="preview-image hidden">
            </div>

            <!-- Reference Image Upload (for multi-angle consistency) -->
            <details class="form-section" style="margin-top: 1rem;">
                <summary style="font-size: 0.9rem; color: #666; cursor: pointer; padding: 0.5rem; list-style: none;">
                    <span style="margin-right: 0.5rem;">‚ñ∂</span>
                    üñºÔ∏è ·∫¢nh Tham Kh·∫£o (Reference) - Optional
                </summary>
                <div class="section-content" style="padding: 0.5rem; border-left: 2px solid #e0e0e0; margin-left: 0.5rem;">
                    <p style="color: #666; font-size: 0.85rem; margin-bottom: 0.75rem; line-height: 1.5;">
                        <strong>üìê Render nhi·ªÅu g√≥c c·ªßa c√πng 1 ph√≤ng:</strong><br>
                        Upload ·∫£nh g√≥c ƒë√£ render ƒë·ªÉ AI gi·ªØ m√†u s·∫Øc, v·∫≠t li·ªáu, √°nh s√°ng nh·∫•t qu√°n.
                    </p>
                    <div class="image-uploader" style="min-height: 120px; border: 1px dashed #ccc;">
                        <input type="file" id="uploadReference" accept="image/*" style="display: none;">
                        <label for="uploadReference" id="uploadReferenceLabel" class="upload-label" style="font-size: 0.85rem; padding: 1rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                <circle cx="8.5" cy="8.5" r="1.5"/>
                                <polyline points="21 15 16 10 5 21"/>
                            </svg>
                            <span class="upload-text" style="font-size: 0.9rem;">üì∏ Upload Reference</span>
                        </label>
                        <img id="previewReference" src="" alt="Reference preview" class="preview-image hidden">
                    </div>
                    <button type="button" id="clearReferenceButton" class="btn-remove" style="display: none; margin-top: 0.5rem; width: 100%; font-size: 0.85rem;">
                        √ó X√≥a Reference
                    </button>
                </div>
            </details>

            <!-- Analyze Button -->
            <button id="analyzeSketchButton" class="btn-primary" disabled>
                <span id="analyzeSpinner" class="spinner hidden"></span>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
                Ph√¢n t√≠ch Sketch (AI)
            </button>

            <!-- Messages -->
            <div id="analyzeError" class="message error-message hidden"></div>
            <div id="analyzeSuccess" class="message success-message hidden"></div>

            <!-- Info Box -->
            <div class="info-box">
                <strong>üí° Tips:</strong>
                <ul>
                    <li>Sketch r√µ r√†ng v·ªã tr√≠ ƒë·ªì n·ªôi th·∫•t</li>
                    <li>Th·ªÉ hi·ªán t·ª∑ l·ªá v√† quan h·ªá kh√¥ng gian</li>
                    <li>C√≥ th·ªÉ l√† v·∫Ω tay ho·∫∑c CAD</li>
                </ul>
            </div>
        </aside>

        <!-- =============================================== -->
        <!-- COLUMN 2: PARAMETERS FORM -->
        <!-- =============================================== -->
        <main class="panel panel-form">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 2</span>
                <h2>Tinh ch·ªânh Th√¥ng s·ªë</h2>
            </div>

            <form id="renderPromptForm">

                <!-- Room Type -->
                <div class="form-group">
                    <label for="room_type">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
                        Lo·∫°i ph√≤ng (Room Type)
                    </label>
                    <textarea id="room_type" rows="2" placeholder="AI s·∫Ω ƒëi·ªÅn t·ª± ƒë·ªông sau khi ph√¢n t√≠ch..."></textarea>
                </div>

                <!-- Interior Style -->
                <div class="form-group">
                    <label for="interior_style">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        Phong c√°ch N·ªôi th·∫•t
                    </label>
                    <input type="text" id="interior_style" placeholder="V√≠ d·ª•: Modern Minimalist, Scandinavian, Industrial...">
                </div>

                <!-- Aspect Ratio & Sketch Adherence -->
                <div class="form-grid-2">
                    <div class="form-group">
                        <label for="aspect_ratio">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                            T·ª∑ l·ªá khung h√¨nh
                        </label>
                        <select id="aspect_ratio">
                            <option value="" disabled selected>ƒêang t·∫£i...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="sketch_adherence">
                            ƒê·ªô b√°m s√°t Sketch:
                            <span id="sketch_adherence_value" class="range-value">0.99</span>
                        </label>
                        <input type="range" id="sketch_adherence" min="0.95" max="1.0" step="0.01" value="0.99" class="range-slider">
                        <div class="range-labels">
                            <span>Linh ho·∫°t</span>
                            <span>Ch√≠nh x√°c</span>
                        </div>
                    </div>
                </div>

                <!-- Collapsible: Furniture Layout -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        B·ªë tr√≠ N·ªôi th·∫•t (Furniture Layout)
                    </summary>
                    <div class="section-content">
                        <div id="furnitureLayoutContainer" class="dynamic-container"></div>
                        <button type="button" class="btn-add" data-container="furnitureLayoutContainer" data-type="furniture">
                            + Th√™m ƒë·ªì n·ªôi th·∫•t
                        </button>
                    </div>
                </details>

                <!-- Collapsible: Wall Treatments -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        V·∫≠t li·ªáu T∆∞·ªùng (Wall Treatments)
                    </summary>
                    <div class="section-content">
                        <div id="wallTreatmentsContainer" class="dynamic-container"></div>
                        <button type="button" class="btn-add" data-container="wallTreatmentsContainer" data-type="wall">
                            + Th√™m t∆∞·ªùng
                        </button>
                    </div>
                </details>

                <!-- Collapsible: Flooring -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        S√†n nh√† (Flooring)
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="flooring_type">Lo·∫°i s√†n:</label>
                            <input type="text" id="flooring_type" placeholder="VD: S√†n g·ªó s·ªìi, S√†n g·∫°ch, S√†n ƒë√° marble...">
                        </div>
                        <div class="form-group">
                            <label for="flooring_description">M√¥ t·∫£ chi ti·∫øt:</label>
                            <textarea id="flooring_description" rows="2" placeholder="VD: S√†n g·ªó s·ªìi t·ª± nhi√™n m√†u s√°ng, v√¢n g·ªó r√µ n√©t, ƒë·ªô b√≥ng m·ªù..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="flooring_rug">Th·∫£m tr·∫£i (n·∫øu c√≥):</label>
                            <input type="text" id="flooring_rug" placeholder="VD: Th·∫£m len x√°m l·ªõn, k·∫øt c·∫•u d·ªát th√¥...">
                        </div>
                    </div>
                </details>

                <!-- Collapsible: Ceiling -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        Tr·∫ßn nh√† (Ceiling)
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="ceiling_type">Lo·∫°i tr·∫ßn:</label>
                            <input type="text" id="ceiling_type" placeholder="VD: Tr·∫ßn th·∫°ch cao ph·∫≥ng, Tr·∫ßn gi·∫≠t c·∫•p, Tr·∫ßn g·ªó...">
                        </div>
                        <div class="form-group">
                            <label for="ceiling_lighting">H·ªá th·ªëng √°nh s√°ng tr·∫ßn:</label>
                            <textarea id="ceiling_lighting" rows="2" placeholder="VD: Khe h·∫Øt s√°ng LED tr·∫Øng, ƒê√®n √¢m tr·∫ßn, ƒê√®n ch√πm..."></textarea>
                        </div>
                    </div>
                </details>

                <!-- Collapsible: Lighting -->
                <details class="form-section" open>
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                        H·ªá th·ªëng √Ånh s√°ng (Lighting)
                    </summary>
                    <div class="section-content">
                        <div id="lightingContainer" class="dynamic-container"></div>
                        <button type="button" class="btn-add" data-container="lightingContainer" data-type="lighting">
                            + Th√™m ngu·ªìn s√°ng
                        </button>
                    </div>
                </details>

                <!-- Collapsible: Decorations -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        ƒê·ªì trang tr√≠ (Decorations)
                    </summary>
                    <div class="section-content">
                        <div id="decorationsContainer" class="dynamic-container"></div>
                        <button type="button" class="btn-add" data-container="decorationsContainer" data-type="decoration">
                            + Th√™m ƒë·ªì trang tr√≠
                        </button>
                    </div>
                </details>

                <!-- Collapsible: Windows & Doors -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                        C·ª≠a s·ªï & C·ª≠a ra v√†o
                    </summary>
                    <div class="section-content">
                        <div id="windowsDoorsContainer" class="dynamic-container"></div>
                        <button type="button" class="btn-add" data-container="windowsDoorsContainer" data-type="window_door">
                            + Th√™m c·ª≠a
                        </button>
                    </div>
                </details>

                <!-- Collapsible: Environment & Atmosphere -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        M√¥i tr∆∞·ªùng & B·∫ßu kh√¥ng kh√≠
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="env_atmosphere">B·∫ßu kh√¥ng kh√≠:</label>
                            <textarea id="env_atmosphere" rows="2" placeholder="VD: Sang tr·ªçng v√† ·∫•m c√∫ng, Tho√°ng ƒë√£ng v√† hi·ªán ƒë·∫°i, Y√™n tƒ©nh..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="env_time">Th·ªùi ƒëi·ªÉm trong ng√†y:</label>
                            <select id="env_time">
                                <option value="">-- Ch·ªçn --</option>
                                <option value="Ban ng√†y, √°nh s√°ng t·ª± nhi√™n" selected>Ban ng√†y</option>
                                <option value="Bu·ªïi t·ªëi, ƒë√®n b·∫≠t s√°ng">Bu·ªïi t·ªëi</option>
                                <option value="Ho√†ng h√¥n, √°nh n·∫Øng nghi√™ng">Ho√†ng h√¥n</option>
                                <option value="Ban ƒë√™m, √°nh ƒë√®n ·∫•m">Ban ƒë√™m</option>
                            </select>
                        </div>
                    </div>
                </details>

                <!-- Collapsible: Technical Specs -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m5.5-11v.01M6.5 18v.01M19 6.5h.01M5 17.5h.01M19 17.5h.01M5 6.5h.01"/></svg>
                        Th√¥ng s·ªë K·ªπ thu·∫≠t
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="tech_camera">G√≥c nh√¨n camera:</label>
                            <input type="text" id="tech_camera" value="Eye-level perspective, full room view">
                        </div>
                        <div class="form-group">
                            <label for="tech_lens">·ªêng k√≠nh:</label>
                            <input type="text" id="tech_lens" value="24-35mm wide-angle">
                        </div>
                        <div class="form-group">
                            <label for="tech_lighting_emphasis">Nh·∫•n m·∫°nh √°nh s√°ng:</label>
                            <input type="text" id="tech_lighting_emphasis" value="High contrast, deep shadows, crisp highlights">
                        </div>
                        <div class="form-grid-2">
                            <div class="form-group">
                                <label for="tech_contrast">TƒÉng Contrast:</label>
                                <input type="text" id="tech_contrast" value="+20%">
                            </div>
                            <div class="form-group">
                                <label for="tech_sharpness">TƒÉng Sharpness:</label>
                                <input type="text" id="tech_sharpness" value="+10%">
                            </div>
                        </div>
                    </div>
                </details>

                <!-- Collapsible: Style Keywords -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                        T·ª´ kh√≥a Phong c√°ch
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <input type="text" id="style_keywords" placeholder="professional interior photography, 8K UHD..." value="photorealistic interior rendering, 8K UHD, high dynamic range, ultra-sharp material details, Architectural Digest quality">
                        </div>
                    </div>
                </details>

                <!-- Collapsible: Negative Prompt -->
                <details class="form-section">
                    <summary>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
                        Negative Prompt
                    </summary>
                    <div class="section-content">
                        <div class="form-group">
                            <textarea id="negative_prompt" rows="3">sketch, drawing, illustration, cartoon, anime, blurry, low resolution, distorted proportions, unrealistic lighting, adding extra furniture, moving objects, changing layout</textarea>
                        </div>
                    </div>
                </details>
            </form>
        </main>

        <!-- =============================================== -->
        <!-- COLUMN 3: OUTPUT & ACTIONS -->
        <!-- =============================================== -->
        <aside class="panel panel-output">
            <div class="panel-header">
                <span class="step-badge">B∆∞·ªõc 3</span>
                <h2>K·∫øt qu·∫£ Render</h2>
            </div>

            <!-- Action Buttons -->
            <div class="output-actions">
                <button id="generateRenderButton" class="btn-submit" disabled>
                    <span id="renderSpinner" class="spinner hidden"></span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    T·∫°o Render
                </button>
            </div>

            <!-- Messages -->
            <div id="renderError" class="message error-message hidden"></div>
            <div id="renderSuccess" class="message success-message hidden"></div>

            <!-- Gallery -->
            <div id="gallery" class="gallery">
                <div class="gallery-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <circle cx="8.5" cy="8.5" r="1.5"/>
                        <polyline points="21 15 16 10 5 21"/>
                    </svg>
                    <p>K·∫øt qu·∫£ render s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y</p>
                </div>
            </div>

            <!-- Output Controls -->
            <div id="outputControls" class="output-controls hidden">
                <button id="downloadImageBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    T·∫£i v·ªÅ
                </button>
                <button id="regenerateBtn" class="btn-secondary btn-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="1 4 1 10 7 10"/>
                        <polyline points="23 20 23 14 17 14"/>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                    </svg>
                    T·∫°o l·∫°i
                </button>
            </div>

            <!-- Stats Box -->
            <div id="statsBox" class="stats-box hidden">
                <div class="stat-item">
                    <span class="stat-label">Th·ªùi gian:</span>
                    <span class="stat-value" id="statTime">-</span>
                </div>
            </div>
        </aside>

    </div>
    <!-- END MAIN CONTAINER -->

    <!-- FOOTER -->
    <footer class="app-footer">
        <p>Made by <strong>Nam Ta</strong> + <strong>Gemini AI</strong></p>
        <p>¬©2025 ‚Ä¢ Interior S2R Tool ‚Ä¢ All rights reserved</p>
    </footer>

    <!-- JavaScript -->
    <script src="interior-script.js?v=1"></script>
</body>
</html>
